<link href="/static/css/base.css" rel="stylesheet" />
<link rel="stylesheet" href="https://unpkg.com/simplebar@latest/dist/simplebar.css" />
<div id="navbar">
    <img onclick="$('#navbarDropDown').slideToggle();" src="/static/images/bars.svg" id="openMenu">
    <div id="trackDisplay" class="nes-badge">
        <span id="trackName">Track</span>
    </div>
    <div id="riddlerBrand"><FONT COLOR="#FF0000">R</FONT><FONT COLOR="#FF8000">i</FONT><FONT COLOR="#FFff00">d</FONT><FONT COLOR="#7Fff00">d</FONT><FONT COLOR="#00ff00">l</FONT><FONT COLOR="#00ff80">e</FONT><FONT COLOR="#00ffff">r</FONT><FONT COLOR="#0080ff"> </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#7F00ff">0</FONT><FONT COLOR="#FF00ff">2</FONT><FONT COLOR="#FF0080">0</FONT></div>
</div>
<div id="navbarDropDown">
    <div onclick="$('#navbarDropDown').hide();" class="links">
        <a href="/game" class="link">Home</a>
        <a onclick="document.getElementById('helpPopup').showModal();" class="link">Instructions</a>
        <a href="/game/leaderboard" class="link">Leaderboard</a>
        <a href="/auth/logout" class="link">Logout</a>
        <a onclick="document.getElementById('resetProg').showModal();" id="resetProgress" class="link">Reset Progress</a>
    </div>
    <div class="points">Points: <div id="points"></div>
    </div>
</div>
<div id="CSILogo"><span>Built by CSI-VIT with ❤️ </span></div>
<section>
    <dialog class="nes-dialog is-rounded" id="helpPopup" style="width: 90%; height:90%;">
        <form id="instructions" method="dialog">
            <p class="title">Instructions:</p>
            <br>
            <ol> 
            <li>
            The game consists of three tracks:
            <ol type="a">
                <li><span class="nes-text is-error" id="crime">Crime </span></li>
                <li><span class="nes-text is-primary" id="art">Art</span></li>
                <li><span class="nes-text is-warning" id="games">Games</span></li>
            </ol>
            </li>
            <li>Every player starts with a base score of 100 points.</li>
            <li>After you answer Question 1, you're diverted to one of the three tracks of your choice. Every track
                has 7 questions each.</li>
            <li>Getting an answer right, would win you 100 points where as seeking a hint would deduct 100 points
                from your total score at that instant and upon answering that question you shall be awarded 100.</li>
            <li>If you start a track and want to go back, your points would be deducted depending on the number of
                questions you are leaving unanswered.
            <br>Example: If you're on track 2 and have answered 3 questions but now you want to change tracks, half of
                the remaining points i.e (4*100)/2 would be deducted from your total score.</li>
            <li>After completing one track you're directed back to the starting point where you can venture along
                the second track of your choice.</li>
            <li>After the completion of all three tracks the remaining eight questions would be a combination of all
                three categories.</li>
            <li>There is no negative score.</li>
            </ol>
                <br>
                <menu class="dialog-menu" align="center">
                    <button class="nes-btn is-primary">Hide</button>
                </menu>
        </form>
    </dialog>
</section>


<section>
    <dialog class="nes-dialog is-rounded" id="resetProg" style="">
        <form id="reset" method="dialog">
            <p class="title" style="font-size:40px;color:red">WARNING</p>
            <p id="message">Are you sure you want to reset to the first question? It will cost you <span class="resetPoints"></span>
                points.</p>
            <p id="new"></p>
            <menu class="dialog-menu" align="center">
                <button class="nes-btn is-primary">Cancel</button>
                <button id="continueBtn" class="nes-btn is-error" onclick="window.location.href='/game/reset'">Continue</button>
            </menu>
        </form>
    </dialog>
</section>
<script src="/static/js/dialog-polyfill.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script src="https://brandonlwhite.github.io/sevenSeg.js/sevenSeg.js"></script>
<script src="https://unpkg.com/simplebar@latest/dist/simplebar.js"></script>
<script>
     const scrollBar2 = new SimpleBar($("#instructions")[0], {autoHide: false});
    $("#points").sevenSeg({
        digits: 5,
        value: "<%= user.points %>",
        colorOn: "Lime",
        colorOff: "#003200"
    });
    let question = parseInt("{{gameData.currentQuestion}}");
    if (question >= 8 || question === 0) {
        $("#resetProgress").hide()
    }
    let question2 = parseInt("{{gameData.currentQuestion}}");
    let points = "{{points}}";
    let track = "{{track}}";
    if(question2==0)
    {
        $("#message").text("You are already on the first question.");
        $("#continueBtn").hide();
    }
    let resetDeduct = ((8 - question2) * 50);
    if(resetDeduct>points)
    resetDeduct = points
    $(".resetPoints").text(resetDeduct.toString()).css("color", "red");
    const colors = {
        "Games": "rgba(247, 213, 29, 0.9)",
        "Art": "rgba(32, 156, 238, 0.9)",
        "Crime":"rgba(231, 110, 85, 0.9)",
        "General": "rgba(118, 196, 66, 0.9)"
    }
    const classes = {
        "Games": "is-warning",
        "Art": "is-primary",
        "Crime":"is-error",
        "General": "is-success"
    }
    $("#trackName").addClass(classes[track]);
    $("#navbarDropDown").css("background-color", colors[track]);
    
    $(function() {
        const images = {
        "Games": "/static/images/gameBack.gif",
        "Art": "/static/images/artBack.gif",
        "Crime": "/static/images/crimeBack.gif",
        "General": "/static/images/gameBack.gif"
    }
     $("#mainContentContainer").css("background-image", "url('"+images[track]+"')");
     $('dialog').each(function(i, obj) {
         dialogPolyfill.registerDialog(obj);
        });
    })
    
</script>